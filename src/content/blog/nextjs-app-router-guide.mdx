---
title: "Next.js App Router 시작하기"
date: "2025-01-20"
description: "Next.js 13에서 도입된 App Router의 주요 개념과 사용법을 알아봅니다."
tags: ["Next.js", "React", "웹개발"]
category: "frontend"
---

# Next.js App Router 시작하기

Next.js 13에서 도입된 App Router는 React의 Server Components를 기반으로 한 새로운 라우팅 시스템입니다.

## App Router란?

App Router는 `app` 디렉토리를 사용하는 새로운 라우팅 방식으로, 다음과 같은 이점을 제공합니다:

- **Server Components**: 기본적으로 서버 컴포넌트를 사용하여 성능 향상
- **Layouts**: 중첩된 레이아웃으로 UI 재사용
- **Loading & Error States**: 내장된 로딩 및 에러 처리
- **Streaming**: 점진적인 페이지 렌더링

## 파일 시스템 기반 라우팅

App Router는 파일과 폴더를 사용하여 라우트를 정의합니다:

```
app/
  page.tsx       # /
  about/
    page.tsx     # /about
  blog/
    page.tsx     # /blog
    [slug]/
      page.tsx   # /blog/:slug
```

## 레이아웃 (Layouts)

레이아웃은 여러 페이지에서 공유되는 UI를 정의합니다:

```typescript
// app/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ko">
      <body>
        <nav>{/* 네비게이션 */}</nav>
        <main>{children}</main>
        <footer>{/* 푸터 */}</footer>
      </body>
    </html>
  );
}
```

## Server Components vs Client Components

### Server Components (기본)

```typescript
// app/posts/page.tsx
async function getPosts() {
  const res = await fetch('https://api.example.com/posts');
  return res.json();
}

export default async function PostsPage() {
  const posts = await getPosts();

  return (
    <div>
      {posts.map(post => (
        <article key={post.id}>{post.title}</article>
      ))}
    </div>
  );
}
```

### Client Components

상호작용이 필요한 경우 `"use client"` 지시문을 사용합니다:

```typescript
"use client";

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  );
}
```

## 데이터 페칭

App Router에서는 컴포넌트에서 직접 데이터를 가져올 수 있습니다:

```typescript
async function getPost(id: string) {
  const res = await fetch(`https://api.example.com/posts/${id}`, {
    // 캐싱 옵션
    cache: 'force-cache', // 기본값
    // next: { revalidate: 3600 } // ISR
  });

  if (!res.ok) {
    throw new Error('Failed to fetch post');
  }

  return res.json();
}

export default async function PostPage({
  params
}: {
  params: { id: string }
}) {
  const post = await getPost(params.id);

  return <article>{post.content}</article>;
}
```

## Loading UI

로딩 상태를 쉽게 처리할 수 있습니다:

```typescript
// app/blog/loading.tsx
export default function Loading() {
  return <div>Loading...</div>;
}
```

## Error Handling

에러 처리도 간단합니다:

```typescript
// app/blog/error.tsx
'use client';

export default function Error({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  return (
    <div>
      <h2>Something went wrong!</h2>
      <button onClick={() => reset()}>Try again</button>
    </div>
  );
}
```

## 메타데이터

SEO를 위한 메타데이터 설정:

```typescript
import type { Metadata } from 'next';

export const metadata: Metadata = {
  title: 'My Blog Post',
  description: 'This is my blog post',
};

export default function Page() {
  return <article>Content</article>;
}
```

## 마치며

App Router는 Next.js의 미래이며, Server Components를 활용한 더 나은 성능과 개발 경험을 제공합니다.

기존 Pages Router에서 마이그레이션을 고려하고 있다면, 공식 문서의 마이그레이션 가이드를 참고하세요!
