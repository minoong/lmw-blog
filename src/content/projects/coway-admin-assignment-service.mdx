---
title: '배정 어드민 서비스 런칭'
order: 3
startDate: '2022-12-01'
endDate: '2023-10-31'
description: '코디네이터 배정 및 일정 관리 어드민 - SSO 연동, 차트 시각화, 대용량 데이터 처리'
tags: ['React', 'TypeScript', 'Vite', 'Recoil', 'React Router', 'React Hook Form', 'react-chartjs-2', 'SSO', 'Naver Maps']
company: "코웨이"
---

## 프로젝트 개요

지점별 관리자가 서비스 매니저의 작업 현황(예정, 진행, 완료)을 실시간으로 모니터링하고 관리할 수 있는 관리자 페이지입니다. Naver Map과 차트를 활용한 시각화, 대량 테이블 편집, 작업 이관 등의 기능을 제공하며, SSO 기반 인증/인가 시스템을 통해 안전한 관리자 운영 환경을 구축했습니다.

**서비스 URL**: 내부 시스템으로 링크 제공 불가

## 기술 스택

- **Frontend**: React, TypeScript
- **Build Tool**: Vite
- **State Management**: Recoil
- **Routing**: React Router
- **Form Management**: React Hook Form
- **Visualization**: react-chartjs-2, Naver Maps API
- **Authentication**: SSO (Single Sign-On)
- **API**: Axios (Interceptor 활용)
- **Testing**: MSW (Mock Service Worker)

## 프로젝트 정보

- **담당**: 프론트엔드 설계, 개발, 공통 아키텍처 구축

## 주요 과제

### 1. 작업 처리 현황 시각화

서비스 매니저의 작업 현황을 react-chartjs-2를 활용하여 실시간으로 시각화했습니다.

#### react-chartjs-2

작업 현황을 다양한 차트로 시각화하여 관리자가 통계 정보를 쉽게 파악할 수 있도록 했습니다:
- **도넛 차트**: 작업 상태별 비율 (예정/진행/완료)
- **바 차트**: 서비스 매니저별 작업 처리량
- **라인 차트**: 시간대별 작업 진행 추이
- **커스텀 툴팁**: Mouse Hover 상태에 따라 position 계산 처리

react-chartjs-2를 커스터마이징하여 재사용 가능한 차트 컴포넌트를 개발하고, 실시간 데이터 업데이트를 지원했습니다.

### 2. 대량 테이블 편집 및 작업 이관

작업을 효율적으로 편집하고 서비스 매니저 간 작업을 이관할 수 있는 기능을 구현했습니다.

#### React Hook Form을 활용한 성능 최적화

대량의 테이블 행을 편집할 때 발생하는 성능 이슈를 React Hook Form으로 해결했습니다. Controlled Component 대신 Uncontrolled Component 방식으로 구현하여 불필요한 리렌더링을 방지하고, 입력 필드(checkbox, input, radio, date-picker)를 동시에 처리할 수 있도록 개발하였습니다.

#### 작업 이관 기능

특정 서비스 매니저의 작업을 다른 서비스 매니저에게 일괄 이관하는 기능을 구현했습니다:
- 다중 선택으로 여러 작업 동시 이관
- 이관 전 작업 충돌 검증
- 이관 이력 추적 및 롤백 기능

#### 엑셀 Export

현재 작업 현황을 엑셀로 Export하는 기능을 구현했습니다.

### 3. 전체화면(Fullscreen) 모드

Fullscreen API를 활용하여 현황판을 전체화면으로 표시하는 기능을 구현했습니다.

#### Fullscreen API 크로스브라우징 이슈 해결

`fullscreenchange` 이벤트를 활용하여 전체화면 상태를 감지하고 현황판 레이아웃을 제어하는 기능을 개발했습니다. Chrome, Firefox, Edge, Naver Whale 4개 브라우저를 대응하면서 여러 이슈를 해결했습니다.

**fullscreenchange 이벤트 기반 구현**:

전체화면 진입/종료 시 `fullscreenchange` 이벤트가 필수로 트리거되어야 레이아웃이 정상적으로 전환되는 구조로 개발했습니다. 하지만 메뉴 버튼 클릭으로 전체화면에 진입하면 일부 브라우저에서 이벤트가 누락되는 문제가 발생했습니다.

**단축키 필수 요구사항 변경**:

이벤트 트리거를 보장하기 위해 기획자와 협의하여 메뉴 버튼이 아닌 단축키로만 전체화면 진입이 가능하도록 요구사항을 변경했습니다. 단축키(F11, ESC)를 사용하면 브라우저 네이티브 이벤트가 안정적으로 발생하여 모든 대응 브라우저에서 `fullscreenchange` 이벤트를 보장할 수 있었습니다.

**브라우저별 대응**:
- Chrome/Edge: 표준 `fullscreenchange` 이벤트 사용
- Firefox: `mozfullscreenchange` 이벤트 리스너 등록
- Naver Whale: Chromium 기반이지만 확대/축소 비율에 따른 레이아웃 이슈 발생

**확대/축소 비율 대응**:

브라우저 확대/축소 비율에 따라 전체화면 레이아웃이 깨지는 문제가 있었습니다. Chrome/Edge는 `window.devicePixelRatio`로, Firefox는 `matchMedia`로 zoom level을 감지하여 엔진별 분기 코드로 레이아웃을 조정했습니다.

네이버 웨일은 특정 확대 비율에서 레이아웃 깨짐을 완전히 해결하지 못해, 안내 메시지를 표시하는 것으로 대응했습니다.

#### 전용 레이아웃 및 폴링

전체화면 모드에서는 사이드바와 헤더를 숨기고 현황판만 표시하도록 레이아웃을 재배치했습니다. 실시간 모니터링을 위해 5초 주기로 작업 현황 API를 폴링하여 데이터를 자동 갱신했습니다.

**Drag 사이즈 조정 기능**:

Naver Map 영역과 차트/테이블 영역의 크기를 드래그로 조정할 수 있도록 커스텀 훅을 직접 구현했습니다. 마우스 이벤트(`mousedown`, `mousemove`, `mouseup`)를 활용하여 드래그 위치를 추적하고, CSS `clamp()` 함수로 영역의 최소/최대 크기를 제한하면서 부드러운 사이즈 조정을 구현했습니다. 조정된 레이아웃 상태는 로컬 스토리지에 저장하여 다음 접속 시에도 유지됩니다.

#### 단축키 지원

전체화면 모드에서 키보드 단축키로 기능을 제어할 수 있도록 구현했습니다.

### 4. 관리자 설정 및 권한별 메뉴 렌더링

관리자 권한에 따라 메뉴를 동적으로 렌더링하고, 관리자 룰을 변경할 수 있는 기능을 구현했습니다.

#### 권한별 메뉴 렌더링

SSO 로그인 완료 이후, 사용자 권한 정보 API 응답 데이터를 기반으로 메뉴를 동적으로 렌더링했습니다. Recoil을 활용하여 전역적으로 권한 정보를 관리하고, 권한이 없는 페이지 접근 시 에러 페이지를 표시했습니다.

**권한 레벨**:
- **운영 관리자**: 모든 기능 접근 가능
- **지점 관리자**: 담당 지점 데이터만 조회/수정(작업 이관) 가능
- **읽기 전용**: 현황 조회만 가능

#### 관리자 룰 변경 기능

운영 관리자가 다른 관리자의 권한으로 변경할 수 있는 기능을 구현했습니다. 권한 변경 시 즉시 반영되도록 실시간 권한 갱신 로직을 추가했습니다.

이를 통해 운영 대응 업무를 효율적으로 처리할 수 있습니다.

### 5. 공통 아키텍처 설계

프로젝트 전반에 걸쳐 재사용 가능한 공통 아키텍처를 설계하고 구현했습니다.

#### SSO 인증/인가 시스템

SSO(Single Sign-On)를 연동하여 통합 로그인 환경을 구축했습니다:
- SSO 로그인 페이지로 리다이렉트
- 인증 토큰 발급 및 쿠키에 저장 (HttpOnly, Secure 옵션 적용)
- 토큰 만료 시 자동 리다이렉트

#### Axios Interceptor를 활용한 토큰 갱신 및 에러 핸들링

Axios Interceptor를 활용하여 API 요청/응답을 핸들링 하였습니다.

**토큰 갱신**:
- 쿠키에 저장된 액세스 토큰을 요청 헤더에 자동 포함
- 액세스 토큰 만료 시 리프레시 토큰으로 자동 갱신
- 갱신된 토큰을 쿠키에 재저장
- 갱신 실패 시 SSO 로그인 페이지로 리다이렉트

**에러 핸들링**:

Axios Interceptor에서 API 에러와 스크립트 에러를 구분하여 처리했습니다.

**API 에러 처리**:
- `401 (Unauthorized)`: 에러 팝업 → SSO 로그인 페이지로 리다이렉트
- `403 (Forbidden)`: 권한 없음 에러 페이지 라우팅
- `404 (Not Found)`: 페이지 없음 에러 페이지 라우팅
- `500 (Internal Server Error)`: 서버 오류 에러 페이지 라우팅
- `기타 4xx/5xx`: 에러 팝업으로 메시지 표시

#### Global Error Boundary

React Error Boundary를 활용하여 예상치 못한 스크립트 런타임 에러를 캐치했습니다.

**스크립트 에러 처리**:
- 컴포넌트 렌더링 에러: 전체 페이지 에러 페이지 표시
- 이벤트 핸들러 에러: 에러 팝업으로 사용자에게 안내

#### 프로젝트 레이아웃 구성

관리자 페이지의 레이아웃을 설계/구현했습니다.
- 사이드바 (메뉴 네비게이션, 펼침/닫기 버튼 및 기능 구현)
- 헤더 (사용자 정보, 로그아웃 버튼)
- 메인 컨텐츠 영역 (Outlet을 활용한 중첩 라우팅)

#### MSW를 활용한 개발 환경 구축

MSW(Mock Service Worker)를 활용하여 백엔드 API 없이도 프론트엔드 개발을 진행할 수 있는 환경을 구축했습니다. API 응답을 모킹하여 다양한 시나리오를 빠르게 테스트하고, 백엔드 개발 일정과 독립적으로 작업했습니다.
