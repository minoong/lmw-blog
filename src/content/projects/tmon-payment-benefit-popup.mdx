---
title: '티몬 결제혜택 팝업 기능 개발'
order: 1
startDate: '2022-10-01'
endDate: '2022-11-30'
description: 'React 기반 PC/모바일 결제혜택 팝업 컴포넌트 개발 및 카드사별 조건 처리'
tags: ['React', 'Redux', 'Redux-Saga', 'Axios', 'Hooks']
company: "티몬"
---

## 프로젝트 개요

티몬 딜상세 페이지에서 사용자에게 적용 가능한 카드 혜택 정보를 제공하는 팝업 기능을 개발했습니다. PC와 모바일 환경을 모두 지원하며, 카드사 및 상품별 혜택 조건을 동적으로 처리 기능을 구현했습니다.

## 기술 스택

- **Frontend**: React, Hooks
- **State Management**: Redux, Redux-Saga
- **HTTP Client**: Axios
- **Platform**: PC Web, Mobile Web, Mobile App (Bridge)

## 프로젝트 정보

- **협업**: 마크업 개발자, 모바일 개발자

## 주요 기능

### 1. **PC/Mobile 컴포넌트 분리 구조**

PC/Mobile 컴포넌트로 분리하여 사용자 환경에 맞는 UI/UX를 제공합니다.

![IMG_0666.PNG](/projects/IMG_0666.PNG)

### 2. **혜택별 탭 관리 (useTabs Hook)**

혜택 종류가 가변적으로 변할 수 있도록 커스텀 훅으로 설계했습니다.

**주요 기능**:
- 활성 탭 상태 관리
- 탭 전환 로직
- 혜택 데이터 필터링
- 탭 동적 생성

### 3. **혜택 그룹핑 처리**

API에서 혜택이 구분되지 않은 형태로 전달되므로, 혜택 유형별로 그룹핑하는 공통 함수를 구현했습니다.

**그룹핑 기준**:
- 카드사별 그룹핑
- 혜택 유형별 그룹핑 (할인, 적립, 무이자 등)
- 상품별 조건 그룹핑

## 담당 업무

### 1. **PC/Mobile 컴포넌트 분리 설계 및 구현**

플랫폼별 최적화된 UI를 제공하기 위해 컴포넌트를 분리했습니다.

#### **PC 컴포넌트**
- 모달 형태의 팝업
- 상세 정보 펼침/접기 기능

#### **Mobile 컴포넌트**
- 바텀 시트 형태의 팝업
- Pull to Refresh 지원
- 터치 인터랙션 지원
- 모바일 앱 브릿지 연동

### 2. **마크업 개발 협업**

마크업 개발자가 작성한 HTML/CSS를 React 컴포넌트로 변환했습니다.

- **퍼블리싱 산출물 통합**
  - HTML/CSS를 JSX로 변환
  - 클래스명을 컴포넌트 구조에 맞게 재구성
  - 동적 스타일 처리 (조건부 클래스, 인라인 스타일)

### 3. **모바일 앱 브릿지 연동**

모바일 개발자와 협업하여 네이티브 앱에서 웹뷰 호출을 통한 모달 팝업 기능을 구현했습니다.

#### **앱에서 웹뷰 호출**
- **브릿지를 통한 웹뷰 실행**
  - 앱에서 결제혜택 팝업 요청
  - 브릿지로 파라미터 전달
  - 웹뷰에서 팝업 렌더링

- **웹뷰 → 앱 콜백 처리**
  - 혜택 이벤트 트리거 앱으로 전달
  - 팝업 닫기 이벤트 전달
  - 에러 발생 시 앱으로 알림

- **플랫폼 분기**
  - iOS/Android 브릿지 차이 처리
  - Web/App 환경 감지
  - 웹 브라우저 폴백 처리

### 4. **API 호출 및 상태 관리**

Redux-Saga를 활용하여 비동기 API 호출을 관리했습니다.

- **API 엔드포인트 관리**
  - 카드사별 혜택 조회 API
  - 상품별 적용 가능 혜택 API

### 5. **카드사별 조건 처리**

각 카드사의 고유한 혜택 조건을 처리하는 로직을 구현했습니다.

#### **카드사별 비즈니스 로직**

- **데이터 정규화**
  - 이벤트, 무이자할부, 청구할인 통일화된 데이터 구조 변환

- **할부 조건 처리**
  - 무이자 할부 개월 수 검증
  - 할부 가능 금액 확인
  - 제외 상품 필터링

## 개발 구현 내용

### Frontend 개발

1. **React 컴포넌트 설계**
   - PC/Mobile 분리 구조
   - 재사용 가능한 UI 컴포넌트
   - Hooks 기반 상태 관리

2. **useTabs 커스텀 훅**
   - 탭 상태 관리
   - 혜택 필터링 로직
   - 탭 전환 애니메이션

3. **혜택 그룹핑 유틸리티**
   - 카드사별 그룹핑
   - 혜택 유형별 분류
   - 데이터 정규화

### State Management

4. **Redux 스토어 설계**
   - 혜택 데이터 상태
   - 선택된 혜택 탭 관리
   - 로딩/에러 상태

5. **Redux-Saga 미들웨어**
   - 비동기 API 호출
   - 사이드 이펙트 관리
   - 에러 핸들링

### 크로스 플랫폼

6. **모바일 앱 브릿지**
   - 앱에서 웹뷰 호출 처리
   - 파라미터 수신 및 파싱
   - 웹뷰 → 앱 콜백 전달
   - iOS/Android 분기 처리

## 프로젝트 성과

- PC와 모바일 환경에서 일관된 혜택 정보 제공
- 재사용 가능한 Hooks와 유틸리티로 유지보수성 향상
- 앱 브릿지를 통한 웹뷰 연동으로 네이티브 앱 기능 확장
- 카드사별 복잡한 혜택 조건을 효과적으로 처리
